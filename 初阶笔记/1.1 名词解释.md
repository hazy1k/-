# **第1章第1节 基础入门**

## **1.1 名词解释**

    更多名词解释可以参考[渗透测试常用术语总结 - 11阳光 - 博客园](https://www.cnblogs.com/sunny11/p/13583083.html)

### 1.1.1 操作系统

    个人计算机（PC）和服务器是两种不同用途的计算设备。

    个人计算机（PC）是指用于个人办公、娱乐、学习等个人需求的计算机设备，通常包括台式机、笔记本电脑、平板电脑和智能手机等。个人计算机通常配置较为灵活，适用于个人用户的日常使用。

     服务器则是一种专门用于提供网络服务的计算机设备，主要用于存储、管理和共享数据、应用和资源。服务器通常配置更为强大，具有高性能的处理器、大容量的存储空间和良好的网络连接，能够同时为多个用户提供服务，如网站托管、数据存储、应用程序部署等。

### 1.1.2 Windows&Linux·常见命令

    参考[【3】web安全入门篇-渗透测试中常用的命令-CSDN博客](https://blog.csdn.net/weixin_43303273/article/details/83029138)

### 1.1.3 文件权限&服务权限&用户权限等

    文件权限、服务权限和用户权限是计算机系统中常见的权限管理概念。它们用于限制对文件、服务和系统资源的访问和操作。

    （1）文件权限：文件权限用于控制对文件和目录的访问和操作。在Unix/Linux系统中，常用的文件权限包括读取（r）、写入（w）和执行（x）权限。这些权限可以分为三个级别：所有者权限、群组权限和其他用户权限。通过设置文件权限，可以精确地控制谁能够读取、写入或执行文件，并且可以限制不同用户的访问权限。

    （2）服务权限：服务权限指的是对系统服务的控制权限。在操作系统中，有许多后台运行的服务程序，如网络服务、数据库服务等。服务权限用于管理对这些服务的启动、停止、配置和管理等操作。通常需要具有管理员或特定角色的权限才能对服务进行管理。

    （3）用户权限：用户权限用于控制用户对计算机系统的访问和操作权限。不同用户可以拥有不同的权限级别，例如超级用户（root/Administrator）具有最高权限，可以对系统进行任意的配置和操作；普通用户则具有受限的权限，只能访问自己的文件和执行特定的操作。用户权限可以通过用户账号和访问控制列表（ACL）来管理。

### 1.1.4 系统用户&用户组&服务用户等分类

    在计算机系统中，用户可以分为系统用户、用户组和服务用户，它们在权限管理和身份识别方面扮演不同的角色：

    （1）系统用户：系统用户是指用于操作系统和系统服务运行的用户账号。这些用户通常不用于人工登录或交互，而是用于系统进程、服务或特定任务的运行。例如，root用户（在Unix/Linux系统中）或Administrator用户（在Windows系统中）是具有最高权限的系统用户，用于执行系统级任务和管理操作。系统用户的操作通常会影响整个系统，需要谨慎使用。

    （2）用户组：用户组是将多个用户账号组合在一起的集合，用于简化权限管理和访问控制。通过将用户放入用户组中，可以轻松地为一组用户分配相同的权限和访问控制。用户组也可以用于共享文件和资源，并简化对多个用户的管理。例如，可以创建一个开发人员组，将所有开发人员的账号加入其中，然后为该组设置相应的文件权限。

    （3）服务用户：服务用户是专门为运行特定服务或应用程序而创建的用户账号。这些用户账号通常用于限制服务的权限范围，以减少风险或提高安全性。服务用户通常具有受限的权限，只能访问其需要的资源，并且通常不允许交互式登录。通过为每个服务分配单独的服务用户，可以提高系统的安全性和隔离性。

### 1.1.5 防火墙出站和入站规则策略&协议

     防火墙是一种网络安全设备，用于保护计算机网络免受未经授权的访问和恶意攻击。防火墙可以通过配置入站和出站规则策略来控制网络流量的进出。以下是关于入站和出站规则策略以及常见协议的一些基本信息：

    （1）入站规则策略：入站规则策略是指防火墙针对外部流量进入本地网络的控制策略。入站规则可以根据源IP地址、目标端口、协议类型等条件进行过滤和限制。常见的入站规则策略包括允许特定IP地址或IP地址范围的访问、禁止某些端口的访问、控制特定协议的访问等。入站规则策略可用于限制从外部网络到达本地网络的网络连接和数据流量。

    （2）出站规则策略：出站规则策略是指防火墙针对本地网络流量离开网络的控制策略。出站规则可以根据源IP地址、目标端口、协议类型等条件进行过滤和限制。常见的出站规则策略包括允许本地网络访问特定IP地址或IP地址范围、控制本地网络对外部网络的连接和通信等。出站规则策略可用于限制从本地网络到外部网络的网络连接和数据流量。

    （3）协议：协议是计算机网络中用于数据交换和通信的规则和约定。常见的网络协议包括TCP（传输控制协议）、UDP（用户数据报协议）、ICMP（互联网控制消息协议）等。防火墙可以根据协议类型对入站和出站流量进行过滤和限制。例如，防火墙可以配置规则仅允许特定的协议（如HTTP、FTP、SSH）通过或禁止某些协议的流量。

### 1.1.6 实用案例

#### 1.1.6.1 文件上传下载-解决无图形化&解决数据传输

    后期许多工具没有图形化界面，需要通过命令行上传下载，如：攻击脚本...

Linux：wget    curl    python    ruby    perl    java等

    演示一下在Linux系统服务器上下载文件

- 使用weget

![](https://img.picgo.net/2024/05/19/-2024-05-19-202412594211df9f9d78ab.png)

Windows: PowerShell    Certutil    Bitsadmin    msiexec    mshta    rundll32等

   在Windows系统上下载：

![](https://img.picgo.net/2024/05/19/-2024-05-19-202718c0dc195f1ec7eedb.png)

    快捷指令：[[~]#棱角 ::Edge.Forum* (ywhack.com)](https://forum.ywhack.com/bountytips.php)一键复制粘贴，好用得很。

#### 1.1.6.2 反弹shell命令-解决数据回显&解决数据通讯

    数据回显：执行命令时，有数据的反馈，从而可以知道有没有问题，执没执行成功。但是在真实渗透环境下，有的地方是没有回显的，比如输入密码啦

    useradd 用户名    passwd 用户名

    测试Linux系统添加用户或修改密码命令交互回显问题

<img src="https://img.picgo.net/2024/05/19/-2024-05-19-2031509afb153cd4ce2a48.png" title="" alt="" width="569">

#### 1.1.6.3 内网服务器

1. 内网：

    内网 -> 你

    你 !-> 内网

    什么意思呢？

    简单来说就是：你（内网）认识某人（互联网），但是那人不认识你呀

![](https://img-blog.csdnimg.cn/img_convert/d4f5c0d6437944635062ea0d4f2190c8.png)

下面用nc这个工具[netcat（nc）下载及基本使用 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/632150788)来演示

- 用虚拟机发送数据到服务器的5577端口，在服务器上监听5577端口

![](https://img.picgo.net/2024/05/19/-2024-05-19-20413529772e8ec1becadf.png)

- 服务器接受到数据啦

![](https://img.picgo.net/2024/05/19/-2024-05-19-204258b595051ba615ea17.png)

- 现在在服务器上进行Shell操作就相当与在虚拟机上了

![](https://img.picgo.net/2024/05/19/-2024-05-19-2045190913129277837180.png)

那么虚拟机 -> 内网服务器呢？

显然，虚拟机不能接收到内网服务器

那么为什么呢？虚拟机的地址相当于网络出口地址，不是你内网的ip啊

![](https://img.picgo.net/2024/05/19/-2024-05-19-2049217a9d5993677ed62c.png)

那么有什么办法解决呢？有！端口映射，后面再讲

#### 1.1.6.4 防火墙绕过&正向连接&反向连接&

1. 防火墙
   
   hazy1k <-> aliyun
   
   hazy1k防火墙 -> aliyun
   
   aliyun !-> hazy1k 防火墙

![](https://img.picgo.net/2024/05/19/-2024-05-19-205710585dff70fc6f45aa.png)

防火墙一开，就反弹不了啊。怎么解决勒——突破点：防火墙入站检测严格，出站宽松

主动连接（正向）-入站。你自己来找我（反向）-出站

主动发送数据，再监听——ok！成功反弹

![](https://img.picgo.net/2024/05/19/-2024-05-19-2102329fc4a8cb7f9166ec.png)

### 1.1.7 真实案例-反弹shell

![](https://img.picgo.net/2024/05/19/-2024-05-19-2110031755af9b58eaab58.png)

![](https://img.picgo.net/2024/05/19/-2024-05-19-211148b57fe23aaae40522.png)

- 先ping一下能不能通

![](https://img.picgo.net/2024/05/19/-2024-05-19-2113241091eab10be96f09.png)

- 上传nc到靶机，再反弹到我们的服务器啦

![](https://img.picgo.net/2024/05/19/-2024-05-19-211724a9ffc42780e9646d.png)

![](https://img.picgo.net/2024/05/19/-2024-05-19-21180156d8ec6ca3b3bcab.png)

- 通过nc监听，已经拿到对方靶机权限啦

![](https://img.picgo.net/2024/05/19/-2024-05-19-21201329ccb4d0cc6db374.png)
